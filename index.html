<!DOCTYPE html>
<html>

<head>

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="apple-touch-icon" href="launch.png">
  <link rel="apple-touch-startup-image" href="launch.png">
  <meta name="apple-mobile-web-app-title" content="Push To Telescope">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <style>
    body {
      background-color: black;
      color: red;
      font-family: verdana;
      font-size: 120%;
    }

    .button {
      background-color: black;
      color: red;
      font-family: verdana;
      font-size: 7vw;
      border: 1px solid red;
      padding: 2% 2%;
      text-align: left;
    }
  </style>
  <script src="dexie.js"></script>
  <script>
    function ready() {
      const db = new Dexie('staffrecords');

      db.version(1).stores({
        people: '++id,name'
      });

      async function addPerson(newName, newAddress) {
        await db.people.put({
          name: newName,
          address: newAddress
        });
      }

      addPerson("Polly", "51 The Bronx")

      async function getRecordById(id) {
        const value = await db.people.get(id);
        console.log(value)
      }
      getRecordById(7)

      async function getRecordByName(name) {
         const array = await db.people.where("name").equals(name).toArray()
        console.log(array[0].name)
      }

      getRecordByName("Nana")

      async function getRecordsBySearchString(string) {
         const array = await db.people
         .where("name")
         .startsWithAnyOfIgnoreCase(string).toArray()
        for (c of array) {console.log(c.name)}
      }

      getRecordsBySearchString("pa")






      // var db = new Dexie("joinz1");
      // db.version(1).stores({
      //   things: ",name"
      //   //joins: "idTo,idFrom,idJoin",
      // //  joinNames: "idJoin,joinTo,joinFrom"
      // });
      //
      // db.things.put(1);
      //   console.log(db.things)
      // // db.things.put({
      // name: "Nicolas"
      // }).then(function() {
      // return db.things.get('Nicolas');
      // }).then(function(thing) {
      // alert("Nicolas has name " + thing.name);
      // }).catch(function(error) {
      // alert("Ooops: " + error);
      // });
      // getThings = function(id) {
      //   var things2 = db.things.where('id').equals(id);
      //   console.log(things2.toString());
      // };

      // getThings = function(id) {
      //
      //      db.things
      //   .where("name").equalsIgnoreCase("bbbb")
      //   .each(thing => {
      //       console.log("Found thing", thing);
      //   });
      // }
      //
      //
      //     getThings(2);
      //
      //     showMatches = () => {
      //       document.getElementById("listMatches").innerHTML = "";
      //       var numberOfItemsAdded = 0;
      //       names = db.things.orderBy('name').filter(function(thing) {
      //         //return thing.name > "b";
      //
      //         // for (const n of db.things.getAll.name) {
      //         //   if (co.type == type && co.visible == true) {
      //         //     numberOfItemsAdded++;
      //         //     var node = document.createElement("BUTTON");
      //         //     var textnode = document.createTextNode(co.name);
      //         //     node.appendChild(textnode);
      //         //     btn = document.getElementById("listCO").appendChild(node);
      //         //     btn.classList.add("button");
      //         //     selectedCos = document.getElementById("listCO").firstChild
      //         //   }
      //         // }
      //       });

      //event handlers
      //   document.getElementById("addThing").addEventListener("click", () => {
      //     db.things.put({
      //       name: document.getElementById("name").value
      //     })
      //   })
      // }
      //document.getElementById("name").addEventListener("keyup",()=>alert("keyup"))
    } //end of ready()

    if (document.readyState == 'loading') {
      document.addEventListener('DOMContentLoaded', ready);
    } else {
      ready();
    }
  </script>

</head>

<body>
  <input id="name" />
  <button id="addThing" class="button">a button</button>


</body>

</html>
